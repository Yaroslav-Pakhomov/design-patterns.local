Простая фабрика
Simple Factory

Простая фабрика - порождающий шаблон проектирования, служащий для создания объектов, не вдаваясь в детали реализации создаваемого объекта. Простую фабрику порой путают со статической фабрикой.

Изначально, можно перепутать, класс фабрики со статическим методом, в который передаются аргументы для создаваемого объекта. С одной стороны - да, очень абстрактно это уже является простой фабрикой (предельно простой), но в таком случае крайне слабо прослеживается целесообразность подобной фабрики, поэтому реализацию выполним на чуть более сложную, но вместе с этим более понятную (понятную в плане "зачем она вообще нужна").

Для примера, создадим фабрику автомобильных двигателей, которая будет производить дизельный или бензиновый двигатель, позволяя заказчику не вникать в подробности того, какими именно характеристиками должен обладать необходимый двигатель.


1. Объявим интерфейс двигателя IVehicleEngine.
В рамках примера, очевидно, нет никакой необходимости в этом интерфейсе, однако он дает пространство для расширения. Вдруг нам потребуются двигатели для тракторов или мотоциклов.

2. Реализуем интерфейс в классе автомобильного двигателя CarEngine.

3. И создадим фабрику CarEngineFactory по производству двигателей с одним единственным методом makeCarEngine(). В метод передаём строковый параметр $type и путём композиции создаём объект класса CarEngine (можно создавать и другие классы в этом методе, либо создать другой класс под другие виды двигателей "Тракторные", "Корабельные" и т.д.) и, от которого будет зависеть тип создаваемого двигателя.

4. В отдельном файле clientCode.php. Создаём объект фабрики CarEngineFactory, вызываем метод makeCarEngine и передаём аргументы.



Ещё пример:

Когда вам понадобится пакет сока, вы обращаетесь к фабрике с соответствующим запросом, она в свою очередь копирует эталон и передает вам его экземпляр. Что при этом происходит внутри фабрики и как она это делает вас не беспокоит.

Также, фабрики зачастую создаются с учетом производства только одного вида продукции. То есть, создавать фабрику по производству пакетов с соком с учетом возможности создания автомобильных покрышек не рекомендуется.
